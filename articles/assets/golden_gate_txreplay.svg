<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1160" height="792" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[participant relayer
participant user

relayer -> ChainA: subscribe('newBlockHeaders')
user -> ChainA: CounterA.incrementCount()
Note over ChainA: transaction mined
ChainA -> relayer: new block header
relayer -> LightClientB: addBlock()
user -> ChainA: get proof data
ChainA -> user: header, tx proof, receipt proof
user -> ProverChainB: header, tx proof, receipt proof
ProverChainB -> ProverChainB: verifyHeader()
ProverChainB -> LightClientB: getConfirmedBlockHash()
LightClientB -> ProverChainB: hashIsValid (bool)
ProverChainB -> ProverChainB: verifyTransaction()
ProverChainB -> ProverChainB: verifyReceipt()
ProverChainB -> ProverChainB: recoverOriginAddress()
ProverChainB -> ProverChainB: verifyOriginNonce()
ProverChainB -> ProverChainB: forwardTransaction()
ProverChainB -> ChainB: CounterB.incrementCount()]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="87.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">relayer</tspan></text></g><g class="actor"><rect x="10" y="734" width="87.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">relayer</tspan></text></g><line x1="53.609375" x2="53.609375" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="117.21875" y="20" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="127.21875" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="127.21875">user</tspan></text></g><g class="actor"><rect x="117.21875" y="734" width="58.40625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="127.21875" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="127.21875">user</tspan></text></g><line x1="146.421875" x2="146.421875" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="425.2734375" y="20" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="435.2734375" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="435.2734375">ChainA</tspan></text></g><g class="actor"><rect x="425.2734375" y="734" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="435.2734375" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="435.2734375">ChainA</tspan></text></g><line x1="464.078125" x2="464.078125" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="522.8828125" y="20" width="135.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="532.8828125" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="532.8828125">LightClientB</tspan></text></g><g class="actor"><rect x="522.8828125" y="734" width="135.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="532.8828125" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="532.8828125">LightClientB</tspan></text></g><line x1="590.4921875" x2="590.4921875" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="763.7265625" y="20" width="135.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="773.7265625" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="773.7265625">ProverChainB</tspan></text></g><g class="actor"><rect x="763.7265625" y="734" width="135.21875" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="773.7265625" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="773.7265625">ProverChainB</tspan></text></g><line x1="831.3359375" x2="831.3359375" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1052.578125" y="20" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1062.578125" y="44.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1062.578125">ChainB</tspan></text></g><g class="actor"><rect x="1052.578125" y="734" width="77.609375" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1062.578125" y="758.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1062.578125">ChainB</tspan></text></g><line x1="1091.3828125" x2="1091.3828125" y1="58" y2="734" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="124.421875" y="88.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="124.421875">subscribe('newBlockHeaders')</tspan></text><line x1="53.609375" x2="464.078125" y1="96" y2="96" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="185.2265625" y="126.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="185.2265625">CounterA.incrementCount()</tspan></text><line x1="146.421875" x2="464.078125" y1="134" y2="134" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="377.4609375" y="154" width="173.234375" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="382.4609375" y="173.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="382.4609375">transaction mined</tspan></text></g><g class="signal"><text x="182.03125" y="212.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="182.03125">new block header</tspan></text><line x1="464.078125" x2="53.609375" y1="220" y2="220" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="274.04296875" y="250.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="274.04296875">addBlock()</tspan></text><line x1="53.609375" x2="590.4921875" y1="258" y2="258" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="238.0390625" y="288.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="238.0390625">get proof data</tspan></text><line x1="146.421875" x2="464.078125" y1="296" y2="296" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="156.421875" y="326.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="156.421875">header, tx proof, receipt proof</tspan></text><line x1="464.078125" x2="146.421875" y1="334" y2="334" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="340.05078125" y="364.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="340.05078125">header, tx proof, receipt proof</tspan></text><line x1="146.421875" x2="831.3359375" y1="372" y2="372" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="406" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">verifyHeader()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="392" y2="392" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="392" y2="415" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="415" y2="415" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="600.4921875" y="440.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="600.4921875">getConfirmedBlockHash()</tspan></text><line x1="831.3359375" x2="590.4921875" y1="448" y2="448" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="624.5" y="478.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="624.5">hashIsValid (bool)</tspan></text><line x1="590.4921875" x2="831.3359375" y1="486" y2="486" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="520" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">verifyTransaction()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="506" y2="506" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="506" y2="529" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="529" y2="529" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="558" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">verifyReceipt()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="544" y2="544" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="544" y2="567" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="567" y2="567" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="596" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">recoverOriginAddress()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="582" y2="582" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="582" y2="605" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="605" y2="605" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="634" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">verifyOriginNonce()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="620" y2="620" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="620" y2="643" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="643" y2="643" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="856.3359375" y="672" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="856.3359375">forwardTransaction()</tspan></text><line x1="831.3359375" x2="851.3359375" y1="658" y2="658" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="851.3359375" y1="658" y2="681" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="851.3359375" x2="831.3359375" y1="681" y2="681" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="841.3359375" y="706.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="841.3359375">CounterB.incrementCount()</tspan></text><line x1="831.3359375" x2="1091.3828125" y1="714" y2="714" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>